(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5079ce44"],{1276:function(t,A,e){"use strict";var n=e("d784"),i=e("44e7"),r=e("825a"),o=e("1d80"),s=e("4840"),a=e("8aa5"),c=e("50c4"),l=e("14c3"),u=e("9263"),h=e("d039"),f=[].push,p=Math.min,d=4294967295,m=!h((function(){return!RegExp(d,"y")}));n("split",2,(function(t,A,e){var n;return n="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,e){var n=String(o(this)),r=void 0===e?d:e>>>0;if(0===r)return[];if(void 0===t)return[n];if(!i(t))return A.call(n,t,r);var s,a,c,l=[],h=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),p=0,m=new RegExp(t.source,h+"g");while(s=u.call(m,n)){if(a=m.lastIndex,a>p&&(l.push(n.slice(p,s.index)),s.length>1&&s.index<n.length&&f.apply(l,s.slice(1)),c=s[0].length,p=a,l.length>=r))break;m.lastIndex===s.index&&m.lastIndex++}return p===n.length?!c&&m.test("")||l.push(""):l.push(n.slice(p)),l.length>r?l.slice(0,r):l}:"0".split(void 0,0).length?function(t,e){return void 0===t&&0===e?[]:A.call(this,t,e)}:A,[function(A,e){var i=o(this),r=void 0==A?void 0:A[t];return void 0!==r?r.call(A,i,e):n.call(String(i),A,e)},function(t,i){var o=e(n,t,this,i,n!==A);if(o.done)return o.value;var u=r(t),h=String(this),f=s(u,RegExp),v=u.unicode,b=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(m?"y":"g"),g=new f(m?u:"^(?:"+u.source+")",b),w=void 0===i?d:i>>>0;if(0===w)return[];if(0===h.length)return null===l(g,h)?[h]:[];var P=0,x=0,y=[];while(x<h.length){g.lastIndex=m?x:0;var C,D=l(g,m?h:h.slice(x));if(null===D||(C=p(c(g.lastIndex+(m?0:x)),h.length))===P)x=a(h,x,v);else{if(y.push(h.slice(P,x)),y.length===w)return y;for(var Q=1;Q<=D.length-1;Q++)if(y.push(D[Q]),y.length===w)return y;x=P=C}}return y.push(h.slice(P)),y}]}),!m)},"14c3":function(t,A,e){var n=e("c6b6"),i=e("9263");t.exports=function(t,A){var e=t.exec;if("function"===typeof e){var r=e.call(t,A);if("object"!==typeof r)throw TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==n(t))throw TypeError("RegExp#exec called on incompatible receiver");return i.call(t,A)}},"4d9b":function(t,A){t.exports="data:image/png;base64,AAABAAEAEBAAAAAAAABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA0NDWELCwvHa11C6XZ1T+t2eFLrdnhT63Z3U+t2eFLrdnZQ63BkRusFBQXQERERnAAAAAAAAAAAAAAAAA0NDbW7fUz/0YpU/+uXW//7pGP//LJr//y6b//8u3D//LNs//yoZf/wml3/141W/8CATv8JCQrCAAAAABQUFIqrdUj//v7+//7+/v/QjFz/6Zhc//39/f/35db/7rKG//3+/f/tm17//v7+/8J/Tf+6fk7/rHVI/xMTE40PDxCerXhL//39/f/+/v7//v7+//79/f/+/v7/5JVb//7+/v/imF3//v7+//Dh1P/EhFL/zKqO/654S/8bGxygPDw8nrR/Uf+5g1P/wYdW/8aJVv/6+vr/+vv7/96zkP/w38//zopV/8uQYP/7+/v/+vr6/7qCU/+zfU//Q0NDlk1NTZHBjFz/wItc/8KMXP/Gj17/zJNg//X19P/MnHX/yIlV/9Cgd//Mk2D/x5Be/8aUZ//Bi1v/tn9Q/1BQUBRRUVEATExMjcCKWv7KlWX/ypZl/8GGVP++gU//8fHx/8GGVP/BhlT/wYVT/7B6TPp4WT/ZS0tLj1FRUQhRUVEAUVFRAFBQUABRUVEAUVFRFk1NTYXLkV7/y5Fe/8uPXf/JkF3/ypBd/8yRXv9CQ0OXUVFRAFFRUQBRUVEAUVFRAFFRUQBRUVEAUFBQAFBQUABRUVEAR0dIktWfbv/VoG7/1Z9u/9Sebf+IZUbYUVFRAFBQUABRUVEAUVFRAFFRUQBRUVEAUVFRAFFRUQBRUVEAUVFRAFBQUABOTk6QSElKj0dISJBNTU2NUVFRAFFRUQBQUFAAUVFRAFFRUQBQUFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//8AAP//AAD//wAA4AMAAIABAAAAAAAAAAAAAAAAAAAAAQAAgAMAAPAPAAD4HwAA/D8AAP//AAD//wAA//8AAA=="},"533d":function(t,A,e){t.exports=e.p+"img/editor-md.4cff7ff8.png"},6547:function(t,A,e){var n=e("a691"),i=e("1d80"),r=function(t){return function(A,e){var r,o,s=String(i(A)),a=n(e),c=s.length;return a<0||a>=c?t?"":void 0:(r=s.charCodeAt(a),r<55296||r>56319||a+1===c||(o=s.charCodeAt(a+1))<56320||o>57343?t?s.charAt(a):r:t?s.slice(a,a+2):o-56320+(r-55296<<10)+65536)}};t.exports={codeAt:r(!1),charAt:r(!0)}},"715e":function(t,A,e){"use strict";e("8cdf")},"8aa5":function(t,A,e){"use strict";var n=e("6547").charAt;t.exports=function(t,A,e){return A+(e?n(t,A).length:1)}},"8cdf":function(t,A,e){},"99af":function(t,A,e){"use strict";var n=e("23e7"),i=e("d039"),r=e("e8b5"),o=e("861d"),s=e("7b0b"),a=e("50c4"),c=e("8418"),l=e("65f0"),u=e("1dde"),h=e("b622"),f=e("2d00"),p=h("isConcatSpreadable"),d=9007199254740991,m="Maximum allowed index exceeded",v=f>=51||!i((function(){var t=[];return t[p]=!1,t.concat()[0]!==t})),b=u("concat"),g=function(t){if(!o(t))return!1;var A=t[p];return void 0!==A?!!A:r(t)},w=!v||!b;n({target:"Array",proto:!0,forced:w},{concat:function(t){var A,e,n,i,r,o=s(this),u=l(o,0),h=0;for(A=-1,n=arguments.length;A<n;A++)if(r=-1===A?o:arguments[A],g(r)){if(i=a(r.length),h+i>d)throw TypeError(m);for(e=0;e<i;e++,h++)e in r&&c(u,h,r[e])}else{if(h>=d)throw TypeError(m);c(u,h++,r)}return u.length=h,u}})},a15b:function(t,A,e){"use strict";var n=e("23e7"),i=e("44ad"),r=e("fc6a"),o=e("a640"),s=[].join,a=i!=Object,c=o("join",",");n({target:"Array",proto:!0,forced:a||!c},{join:function(t){return s.call(r(this),void 0===t?",":t)}})},b0c0:function(t,A,e){var n=e("83ab"),i=e("9bf2").f,r=Function.prototype,o=r.toString,s=/^\s*function ([^ (]*)/,a="name";n&&!(a in r)&&i(r,a,{configurable:!0,get:function(){try{return o.call(this).match(s)[1]}catch(t){return""}}})},d784:function(t,A,e){"use strict";e("ac1f");var n=e("6eeb"),i=e("d039"),r=e("b622"),o=e("9263"),s=e("9112"),a=r("species"),c=!i((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),l=function(){return"$0"==="a".replace(/./,"$0")}(),u=r("replace"),h=function(){return!!/./[u]&&""===/./[u]("a","$0")}(),f=!i((function(){var t=/(?:)/,A=t.exec;t.exec=function(){return A.apply(this,arguments)};var e="ab".split(t);return 2!==e.length||"a"!==e[0]||"b"!==e[1]}));t.exports=function(t,A,e,u){var p=r(t),d=!i((function(){var A={};return A[p]=function(){return 7},7!=""[t](A)})),m=d&&!i((function(){var A=!1,e=/a/;return"split"===t&&(e={},e.constructor={},e.constructor[a]=function(){return e},e.flags="",e[p]=/./[p]),e.exec=function(){return A=!0,null},e[p](""),!A}));if(!d||!m||"replace"===t&&(!c||!l||h)||"split"===t&&!f){var v=/./[p],b=e(p,""[t],(function(t,A,e,n,i){return A.exec===o?d&&!i?{done:!0,value:v.call(A,e,n)}:{done:!0,value:t.call(e,A,n)}:{done:!1}}),{REPLACE_KEEPS_$0:l,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:h}),g=b[0],w=b[1];n(String.prototype,t,g),n(RegExp.prototype,p,2==A?function(t,A){return w.call(t,this,A)}:function(t){return w.call(t,this)})}u&&s(RegExp.prototype[p],"sham",!0)}},d7c9:function(t,A){t.exports="data:image/png;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAACubAD+rm0A/65tAP+ubQD/rm0A/65tAP+ubQD/rm0A/65tAP+ubQD/rm0A/65tAP+ubQD/rm0A/65tAP+ubQD/rmwA/q5tAP+ubQD/rm0A/65tAP+ubQD/rm0A/65tAP+ubQD/rm0A/65tAP+ubQD/rm0A/65tAP+ubQD/rm0A/65sAP6ubQD/rm0A/65tAP+ubQD/rm0A/65tAP+ubQD/rm0A/65tAP+ubQD/rm0A/65tAP+ubQD/rm0A/65tAP+ubAD+s3cT/9Crbv/l07P/6Ne6/9Sze/+1exn/rm0A/7FzC//TsXj/4syn/+LMp//izKf/4syn/+LMp//Elkj/tnoX/t3Dl//69/L/8ufY//Dl0//59e//5tS1/7N2Ev+0eBP/69zD//Xu4v/r3cT/69zD/+vcw//r3MP/yZ5X/8OTQf738ef/2byK/7BzCv+vbwX/0Kps//n17/++izb/tHgT/+vcw//Yuof/sHEH/65tAP+ubQD/rm0A/65tAP/Kn1b++fXu/8eaT/+ubQD/rm0A/8GQPv/0693/x51U/7R4E//r3MP/27+Q/7Z8Gv+0eBP/tHgT/7J1Dv+ubQH/zaVh/vfx5//ElUj/rm0A/65tAP/Ajzv/8+rb/8meV/+0eBP/69zD//r38f/27+P/9u/j//bv4//q2r//tHkV/86mYv738ef/xJVH/65tAP+ubQD/wI87//Pq2//Jnlf/tHgT/+vcw//p2Lv/0q5z/9Gsb//RrG//y6Jd/7FyCv/OpmL+9/Hn/8SVR/+ubQD/rm0A/8CPO//z6tv/yZ5X/7R4E//r3MP/2LqH/7BxB/+ubQD/rm0A/65tAP+ubQD/zqZi/vfx5//ElUf/rm0A/65tAP/Ajzv/8+rb/8meV/+0eBP/69zD/+3fyP/avo7/2byL/9m8i//ZvIv/t34e/8ebT/7m07T/v4w3/65tAP+ubQD/u4Yt/+LNqf/Ck0P/snUP/9zClf/r3MX/69zD/+vcw//r3MP/69zD/7uGLP+xcQf+rm0A/65tAP+ubQD/rm0A/65tAP+ubQD/rm0A/65tAP+ubQD/rm0A/65tAP+ubQD/rm0A/65tAP+ubQD/rmwA/q5tAP+ubQD/rm0A/65tAP+ubQD/rm0A/65tAP+ubQD/rm0A/65tAP+ubQD/rm0A/65tAP+ubQD/rm0A/65sAP6ubQD/rm0A/65tAP+ubQD/rm0A/65tAP+ubQD/rm0A/65tAP+ubQD/rm0A/65tAP+ubQD/rm0A/65tAP+ubAD+rmwA/q5sAP6ubAD+rmwA/q5sAP6ubAD+rmwA/q5sAP6ubAD+rmwA/q5sAP6ubAD+rmwA/q5sAP6ubAD+AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=="},d888:function(t,A,e){"use strict";e.r(A);var n=function(){var t=this,A=t.$createElement,e=t._self._c||A;return e("div",{staticClass:"flex flex-col h-full"},[e("div",{staticClass:"h-12 flex-none flex items-center justify-between text-lg font-blod pl-2 border-b shadow"},[e("div",{staticClass:"flex items-center text-indigo-500 pr-3 pl-1"},[e("a-icon",{staticClass:"mr-2 text-sm text-gray-600",staticStyle:{"margin-bottom":"0.15rem"},attrs:{type:"home"}}),e("a-breadcrumb",[e("a-breadcrumb-item",[e("router-link",{staticClass:"link",attrs:{to:"/"+t.repo}},[t._v(" "+t._s(t.repo)+" ")])],1),t._l(t.paths,(function(A,n){return e("a-breadcrumb-item",{key:n},[e("router-link",{staticClass:"link",attrs:{to:A.path}},[t._v(" "+t._s(A.name)+" ")])],1)}))],2)],1),e("div",{staticClass:"flex items-center"},[e("a-button",{staticClass:"mr-3 flex items-center justify-center",attrs:{type:"primary",shape:"circle",icon:"sync",size:"small",ghost:""},on:{click:t.getContents}}),e("a-button",{staticClass:"mr-3",attrs:{type:"primary",ghost:""},on:{click:function(A){t.showUpload=!t.showUpload}}},[t._v(" 上传文件 ")]),e("a-button",{staticClass:"mr-3",attrs:{type:"danger",ghost:""},on:{click:function(A){return t.clickFile({})}}},[t._v(" 新建文件 ")]),e("a-dropdown",[e("div",{staticClass:"mr-3",on:{click:function(t){return t.preventDefault()}}},[e("a-avatar",{staticClass:"shadow",attrs:{src:t.avatar_url}}),e("a-icon",{staticClass:"text-xs ml-1",attrs:{type:"caret-down"}})],1),e("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[e("a-menu-item",[e("a",{attrs:{href:"https://github.com/"+t.owner,target:"_blank"}},[t._v(" "+t._s(t.owner)+" ")])]),e("a-menu-item",[e("div",{on:{click:t.outLogin}},[t._v("退出")])])],1)],1)],1)]),e("overlay-scrollbars",{staticClass:"flex-1"},[e("a-list",{attrs:{"item-layout":"horizontal","data-source":t.list},scopedSlots:t._u([{key:"renderItem",fn:function(A){return e("a-list-item",{staticStyle:{height:"45px"}},["dir"===A.type?e("div",{staticClass:"flex items-center px-3"},[e("a-icon",{staticClass:"mr-2",staticStyle:{color:"#79b8ff"},attrs:{type:"folder",theme:"filled"}}),e("router-link",{staticClass:"link",attrs:{to:"/"+t.repo+"/"+A.path}},[t._v(" "+t._s(A.name)+" ")])],1):e("div",{staticClass:"flex items-center px-3"},[e("a-icon",{staticClass:"mr-2 text-gray-600",attrs:{type:"file"}}),e("div",{staticClass:"link",on:{click:function(e){return t.clickFile(A)}}},[t._v(t._s(A.name))])],1),"file"===A.type?e("div",{staticClass:"text-sm text-red-600 cursor-pointer",attrs:{slot:"actions"},on:{click:function(e){return t.delFile(A)}},slot:"actions"},[t._v(" 删除 ")]):t._e()])}}])})],1),e("editor",{attrs:{show:t.showEdit,item:t.item}}),e("upload",{attrs:{show:t.showUpload,item:t.item}})],1)},i=[],r=(e("99af"),e("a15b"),e("ac1f"),e("1276"),e("5530")),o=e("2f62"),s=e("be65"),a=e.n(s),c=function(){var t=this,A=t.$createElement,e=t._self._c||A;return e("div",[e("a-modal",{attrs:{title:"编辑",visible:t.visible,"confirm-loading":t.confirmLoading,okText:"提交",cancelText:"取消",centered:"",maskClosable:!1,keyboard:!1,width:800},on:{ok:t.handleOk,cancel:t.handleCancel}},[e("a-spin",{attrs:{spinning:t.spinning}},[e("div",{staticClass:"flex flex-col",staticStyle:{height:"75vh"}},[e("a-input",{attrs:{placeholder:"地址"},model:{value:t.path,callback:function(A){t.path=A},expression:"path"}}),e("div",{staticClass:"py-3 flex"},t._l(t.tools,(function(A,n){return e("a-tooltip",{key:n},[e("template",{slot:"title"},[t._v(" "+t._s(A.name)+" ")]),e("a-button",{staticClass:"flex items-center justify-center mr-2",attrs:{size:"small",shape:"circle"},on:{click:function(e){return t.clickTool(A.url)}}},[e("img",{staticClass:"h-4 rounded-full",attrs:{src:A.icon}})])],2)})),1),e("overlay-scrollbars",{ref:"textareaScrollbar",staticClass:"flex-1 border rounded"},[e("div",{staticClass:"min-h-full min-w-full",style:"height:"+t.height},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],ref:"textarea",staticClass:"min-h-full min-w-full overflow-hidden p-2 outline-none resize-none absolute line-height-21",style:"height:"+t.height,attrs:{placeholder:"内容"},domProps:{value:t.content},on:{input:function(A){A.target.composing||(t.content=A.target.value)}}})])])],1)]),e("tool",{attrs:{show:t.showTool,content:t.content,url:t.url},on:{change:t.toolChange}})],1)],1)},l=[],u=(e("b0c0"),e("f43e")),h=function(){var t=this,A=t.$createElement,e=t._self._c||A;return e("div",[e("a-modal",{staticClass:"tool-modal",attrs:{visible:t.visible,centered:!0,width:"100%",footer:null,closable:!1}},[e("a-button",{staticClass:"absolute z-10 flex items-center justify-center shadow",staticStyle:{top:"60px",right:"20px"},attrs:{type:"danger",shape:"circle",icon:"close",size:"large"},on:{click:function(A){t.visible=!1}}}),e("a-spin",{attrs:{spinning:t.spinning}},[e("iframe",{ref:"iframe",staticClass:"h-screen w-full",attrs:{src:t.url,frameborder:"no",border:"0",marginwidth:"0",marginheight:"0",scrolling:"no",allowtransparency:"yes"}})])],1)],1)},f=[],p={name:"tool",props:["content","show","url"],data:function(){return{visible:!1,spinning:!1}},watch:{show:function(){this.visible=!0,this.spinning=!0,void 0!==this.$refs.iframe&&this.setContent()}},mounted:function(){var t=this;window.addEventListener("message",(function(A){var e=A.data;switch(e.method){case"onChange":t.$emit("change",e.content);break;case"setContent":t.spinning=!1;break;case"onLoad":t.setContent();break}}),!1)},methods:{setContent:function(){this.$refs.iframe.contentWindow.postMessage({method:"setContent",content:this.content},"*")}}},d=p,m=e("2877"),v=Object(m["a"])(d,h,f,!1,null,null,null),b=v.exports,g={components:{Tool:b},name:"editor",props:["item","show"],data:function(){return{visible:!1,confirmLoading:!1,content:"",path:"",newItem:{},height:"100%",spinning:!1,tools:[{name:"Code编辑器",url:"https://ace520.github.io/ace",icon:e("4d9b")},{name:"MD编辑器",url:"https://ace520.github.io/editor-md",icon:e("533d")},{name:"百度编辑器",url:"https://ace520.github.io/ueditor",icon:e("d7c9")}],url:"",showTool:!1}},watch:{show:function(){this.height="100%",this.spinning=!0,this.newItem=this.item,void 0!=this.newItem.path?this.path=this.newItem.path:this.newItem.dir?this.path=this.newItem.dir+"/":this.path="",this.visible=!0,this.confirmLoading=!1,this.getContent()},content:function(){var t=this;setTimeout((function(){t.height=t.$refs.textarea.scrollHeight+"px"}),100)}},mounted:function(){},methods:{toolChange:function(t){this.content=t},clickTool:function(t){this.url=t,this.showTool=!this.showTool},handleOk:function(){var t=this;this.confirmLoading=!0,this.octokit.request("PUT /repos/{owner}/{repo}/contents/{path}",{owner:this.owner,repo:this.newItem.repo,path:this.path,message:"put content",content:u["Base64"].encode(this.content),sha:this.newItem&&this.newItem.sha?this.newItem.sha:""}).then((function(A){if(A.data.error)return t.$message.error(A.data.error),!1;t.$message.success("上传成功"),t.visible=!1,t.confirmLoading=!1}))},handleCancel:function(){this.visible=!1},getContent:function(){var t=this;this.content="",this.newItem&&this.newItem.name?this.octokit.request("GET /repos/{owner}/{repo}/contents/{path}",{owner:this.owner,repo:this.newItem.repo,path:this.newItem.path}).then((function(A){t.content=u["Base64"].decode(A.data.content),t.spinning=!1})):this.spinning=!1}},computed:Object(r["a"])({},Object(o["b"])(["owner"]))},w=g,P=(e("715e"),Object(m["a"])(w,c,l,!1,null,"00077638",null)),x=P.exports,y=function(){var t=this,A=t.$createElement,e=t._self._c||A;return e("div",[e("a-modal",{attrs:{title:"上传文件",visible:t.visible,"confirm-loading":t.confirmLoading,okText:"上传",cancelText:"取消",centered:!0,maskClosable:!1,keyboard:!1},on:{ok:t.handleOk,cancel:t.handleCancel}},[e("a-input-search",{attrs:{placeholder:"file path",size:"large"},on:{search:t.addFile},model:{value:t.newFilePath,callback:function(A){t.newFilePath=A},expression:"newFilePath"}},[e("a-button",{attrs:{slot:"enterButton"},slot:"enterButton"},[t._v(" 选择文件 ")])],1),e("input",{ref:"file",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:function(A){return t.getFile(A)}}})],1)],1)},C=[],D={name:"upload",props:["show","item"],data:function(){return{visible:!1,confirmLoading:!1,newFilePath:"",content:""}},watch:{show:function(){this.newFilePath=this.item.dir?this.item.dir+"/":this.item.dir,this.visible=!0}},mounted:function(){},methods:{addFile:function(){this.$refs.file.click()},getFile:function(t){var A=t.target.files[0];this.newFilePath=this.newFilePath+A.name;var e=this;this.getFileBase64(A,(function(t){e.content=t}))},handleOk:function(){var t=this;this.confirmLoading=!0,this.octokit.request("PUT /repos/{owner}/{repo}/contents/{path}",{owner:this.owner,repo:this.item.repo,path:this.newFilePath,message:"put content",content:this.content}).then((function(A){if(A.data.error)return t.$message.error(A.data.error),!1;t.$message.success("上传成功"),t.visible=!1,t.confirmLoading=!1}))},handleCancel:function(){this.visible=!1},getFileBase64:function(t,A){var e=new FileReader;e.readAsDataURL(t),e.onload=function(t){"function"===typeof A&&A(t.target.result.split(",").pop())}}},computed:Object(r["a"])({},Object(o["b"])(["owner"]))},Q=D,E=Object(m["a"])(Q,y,C,!1,null,null,null),k=E.exports,F={components:{Editor:x,Upload:k},data:function(){return{repo:"",path:"",list:[],showUpload:!1,showEdit:!1,item:{}}},watch:{$route:function(t){this.initPath(t)}},mounted:function(){this.initPath(this.$route)},methods:{clickFile:function(t){t.path?(this.item=t,this.item.repo=this.repo):this.item={repo:this.repo,dir:this.path},this.showEdit=!this.showEdit},delFile:function(t){var A=this;this.$confirm({title:"是否确定要删除此文件吗？",content:t.path,okText:"删除",okType:"danger",cancelText:"取消",centered:!0,onOk:function(){return A.octokit.request("DELETE /repos/{owner}/{repo}/contents/{path}",{owner:A.owner,repo:A.repo,path:t.path,message:"DELETE",sha:t.sha}).then((function(t){if(t.data.error)return A.$message.error(t.data.error),!1;A.$message.success("删除成功")}))},onCancel:function(){}})},getContents:function(){var t=this;this.list=[],this.octokit.request("GET /repos/{owner}/{repo}/contents/{path}",{owner:this.owner,repo:this.repo,path:this.path}).then((function(A){for(var e=[],n=[],i=0;i<A.data.length;i++)"dir"==A.data[i].type?e.push(A.data[i]):n.push(A.data[i]);t.list=e.concat(n)}))},initPath:function(t){var A=t.params.repo,e=t.params.pathMatch;void 0==A&&(A=e,e=""),this.repo=A,this.path=e,this.item={repo:A,dir:e},this.getContents()},outLogin:function(){a.a.remove("user"),a.a.remove("token"),this.$router.push("/login")}},computed:Object(r["a"])(Object(r["a"])({},Object(o["b"])(["owner","avatar_url"])),{},{paths:function(){for(var t=this.path?this.path.split("/"):[],A=[],e=[],n=0;n<t.length;n++)A.push(t[n]),e.push({name:t[n],path:"/"+this.repo+"/"+A.join("/")});return e}})},U=F,T=Object(m["a"])(U,n,i,!1,null,null,null);A["default"]=T.exports}}]);
//# sourceMappingURL=chunk-5079ce44.534f6f7e.js.map